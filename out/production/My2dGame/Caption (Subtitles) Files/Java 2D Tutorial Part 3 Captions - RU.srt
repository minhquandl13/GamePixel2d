1
00:00:01,360 --> 00:00:04,240
да, вот так

2
00:00:06,879 --> 00:00:16,560
вы можете видеть, что программа поддерживает 60 кадров в секунду, так что это работает хорошо

5
00:00:14,400 --> 00:00:21,760
Хорошо, теперь мы собираемся создать класс Player

7
00:00:18,160 --> 00:00:21,760
сначала создадим еще один пакет

8
00:00:22,560 --> 00:00:29,199
и я назову его entity

10
00:00:27,119 --> 00:00:35,760
Итак, мы создадим все классы персонажей.

12
00:00:33,840 --> 00:00:38,719
игрок, монстр, нпс и т.д.

13
00:00:35,760 --> 00:00:40,800
затем внутри этого пакета сущностей

14
00:00:38,719 --> 00:00:43,360
создадим класс под названием Entity

16
00:00:43,440 --> 00:00:54,399
и это будет родительский класс для класса Player и любых других классов персонажей.

19
00:00:52,079 --> 00:00:58,399
и внутри этого класса Entity мы создаем некоторые переменные

26
00:01:07,920 --> 00:01:12,560
хорошо, на этом пока все

27
00:01:10,720 --> 00:01:15,600
теперь давайте создадим класс Player

29
00:01:14,400 --> 00:01:22,240
внутри этого пакета entity создадим Player

33
00:01:22,960 --> 00:01:35,200
наследующий Entity

36
00:01:30,000 --> 00:01:36,720
и мы собираемся использовать класс GamePanel

37
00:01:35,200 --> 00:01:40,360
а также KeyHandler

39
00:01:40,560 --> 00:01:50,240
Итак, импорт... вот этот, я думаю

42
00:01:49,360 --> 00:01:53,119
и конструктор

46
00:01:55,040 --> 00:02:03,040
и мы получаем GamePanel, также KeyHandler

53
00:02:16,080 --> 00:02:21,840
и возвращаемся к этому классу GamePanel

54
00:02:19,520 --> 00:02:26,400
мы инстанцируем этот класс Player

59
00:02:29,680 --> 00:02:37,239
и передадим GamePanel и KeyHandler

62
00:02:40,800 --> 00:02:49,360
теперь мы можем использовать GamePanel и KeyHandler из класса Player

64
00:02:47,760 --> 00:02:53,760
и затем мы создадим метод

71
00:03:01,519 --> 00:03:07,840
и внутри мы установим значения по умолчанию для игрока

73
00:03:06,080 --> 00:03:12,720
и первое, x равно 100 на данный момент

76
00:03:11,519 --> 00:03:17,360
и y равно 100

79
00:03:15,680 --> 00:03:20,239
и скорость равна 4

81
00:03:20,319 --> 00:03:26,080
так что, возможно, вы заметили

83
00:03:24,000 --> 00:03:34,159
но то, что мы делаем здесь, это то же самое, что мы делали внутри этого класса GamePanel

86
00:03:30,879 --> 00:03:36,319
но это было только для тестирования

87
00:03:34,159 --> 00:03:47,599
мы обновляем информацию об игроке и рисуем игрока в этом классе GamePanel 

90
00:03:42,879 --> 00:03:50,480
сейчас речь идет только об игроке 

91
00:03:47,599 --> 00:03:57,040
но в будущем мы будем обновлять и рисовать больше вещей, таких как фоновые плитки или монстры или npcs

94
00:03:56,000 --> 00:04:05,840
если мы напечатаем все здесь, то это будет огромный кусок кода

98
00:04:03,920 --> 00:04:13,040
Вы можете сделать это, но было бы лучше, если бы мы могли обрабатывать это более организованным способом

101
00:04:11,920 --> 00:04:25,440
Поэтому мы создадим этот метод update в классе Player.

106
00:04:22,639 --> 00:04:29,400
а также метод draw

108
00:04:29,600 --> 00:04:36,800
и мы копируем все внутрь update

110
00:04:36,960 --> 00:04:44,720
копируем или перемещаем все сюда

113
00:04:43,280 --> 00:04:50,320
а также сюда

116
00:04:48,080 --> 00:04:57,840
мы переместим эти две строки внутрь метода draw

119
00:05:00,160 --> 00:05:05,120
и здесь

121
00:05:03,520 --> 00:05:06,880
поэтому мы просто набираем

123
00:05:06,880 --> 00:05:13,520
поэтому мы просто вызываем этот метод внутри класса Player

128
00:05:19,039 --> 00:05:25,680
и убедимся, что передали Graphics2D

129
00:05:22,800 --> 00:05:27,280
без этого мы не сможем ничего нарисовать

130
00:05:25,680 --> 00:05:35,840
поэтому мы получаем Graphics2D здесь

136
00:05:36,639 --> 00:05:44,320
Теперь мы можем использовать этот g2 внутри класса Player.

138
00:05:41,520 --> 00:05:49,840
Да, теперь мы видим некоторые ошибки, поэтому нам нужно сделать небольшую настройку

140
00:05:46,639 --> 00:05:54,240
так что на этот раз вместо этого игрока y, x или скорости игрока

142
00:05:51,600 --> 00:06:04,440
мы будем использовать y, x и speed

147
00:06:08,639 --> 00:06:15,280
также x и y и tileSize

151
00:06:15,759 --> 00:06:25,120
мы будем просто использовать tileSize из класса GamePanel

153
00:06:21,440 --> 00:06:28,080
Хорошо, я думаю, нам нужно сделать это публичным

156
00:06:35,759 --> 00:06:43,520
Это должно быть публичным, иначе класс Player не сможет получить к этому доступ

159
00:06:43,520 --> 00:06:49,039
поэтому мы назвали это просто x, y и speed. 

160
00:06:46,080 --> 00:06:51,919
не playerX, playerY, playerSpeed

161
00:06:49,039 --> 00:07:00,560
потому что другие персонажи (не player) также используют эти переменные

163
00:06:56,080 --> 00:07:03,840
также давайте вызовем этот метод из этого конструктора

165
00:07:04,639 --> 00:07:11,599
поэтому мы установим эти значения по умолчанию

166
00:07:07,759 --> 00:07:11,599
Хорошо, давайте проверим это

168
00:07:13,680 --> 00:07:18,720
Итак, прямоугольник движется так же, как и раньше

170
00:07:19,280 --> 00:07:25,039
но перемещать прямоугольник не так уж весело

171
00:07:21,840 --> 00:07:27,199
поэтому давайте заменим его спрайтами персонажей

174
00:07:27,199 --> 00:07:36,639
Я подготовил их, так что вот спрайты персонажей игроков, которые я сделал

176
00:07:32,720 --> 00:07:41,440
Я подготовил 8 изображений. 2 для вниз, 2 для влево,

177
00:07:36,639 --> 00:07:44,240
2 для вправо и 2 для вверх

178
00:07:41,440 --> 00:07:50,800
По 2 изображения для каждого направления, чтобы мы могли создать небольшую анимацию

181
00:07:47,360 --> 00:07:57,440
Я знаю, что мои навыки пиксель-арта довольно рудиментарны, поэтому я думаю, что вы можете создать лучше.

184
00:07:54,800 --> 00:08:00,319
для создания этих спрайтов вы можете использовать любое программное обеспечение

185
00:07:57,440 --> 00:08:06,000
вы можете использовать Paint, Photoshop, Gimp, все что угодно.

188
00:08:02,800 --> 00:08:11,280
возможно, я создам небольшое видео, чтобы показать, как я делаю эти спрайты позже

191
00:08:11,280 --> 00:08:22,240
просто убедитесь, что размер 16 на 16 и фон прозрачный

194
00:08:19,280 --> 00:08:23,440
и расширение PNG

195
00:08:22,240 --> 00:08:29,520
мы создадим папку res

199
00:08:32,479 --> 00:08:37,279
и внутри нее мы создадим пакет

201
00:08:36,000 --> 00:08:42,159
мы назовем его player

203
00:08:40,240 --> 00:08:51,360
скопируем эти изображения в этот пакет player

208
00:08:52,839 --> 00:08:57,760
теперь перейдем к этой сущности

209
00:08:56,480 --> 00:09:01,839
и добавим еще одну переменную

220
00:09:16,720 --> 00:09:22,640
и еще одну переменную

226
00:09:30,800 --> 00:09:37,200
и импортировать BufferedImage

227
00:09:34,480 --> 00:09:39,600
Хорошо, давайте перейдем к этому классу Player

228
00:09:37,200 --> 00:09:40,560
и теперь давайте создадим еще один метод

241
00:10:06,240 --> 00:10:14,000
и внутри этого try and catch мы загрузим эти изображения

249
00:10:27,519 --> 00:10:34,480
и внутри этой скобки мы вводим путь к файлу

251
00:10:31,360 --> 00:10:40,399
и поскольку он находится внутри пакета player в папке res

260
00:10:52,399 --> 00:10:59,040
так что давайте скопируем

279
00:11:26,959 --> 00:11:32,320
хорошо, и давайте вызовем этот метод

282
00:11:35,120 --> 00:11:41,360
также давайте установим направление по умолчанию

288
00:11:48,959 --> 00:11:56,959
внутри этого оператора if мы добавим информацию о направлении

291
00:11:55,680 --> 00:11:58,639
так что если нажата кнопка вверх, то направление вверх

295
00:12:03,200 --> 00:12:12,160
а если нажать вниз, то направление будет вниз

303
00:12:26,000 --> 00:12:30,320
и переходим к методу draw

305
00:12:30,320 --> 00:12:37,320
мы больше не будем его использовать

306
00:12:33,200 --> 00:12:37,320
мы не будем использовать этот прямоугольник

312
00:12:51,040 --> 00:13:00,560
создайте оператор switch или оператор if... любой вариант подойдет

315
00:12:59,200 --> 00:13:03,040
мы собираемся проверить направление

318
00:13:03,040 --> 00:13:09,519
если направление вверх

321
00:13:13,440 --> 00:13:18,399
а если направление вниз

326
00:13:46,480 --> 00:13:54,720
Итак, вот эти BufferedImages, которые мы загрузили некоторое время назад

329
00:13:53,920 --> 00:14:00,639
поэтому, основываясь на этом направлении, мы выбираем разные изображения

331
00:13:57,360 --> 00:14:06,240
и, наконец, мы нарисуем изображение

337
00:14:10,959 --> 00:14:17,839
мы введем x и y

339
00:14:14,880 --> 00:14:21,680
а также введем ширину и высоту

340
00:14:17,839 --> 00:14:23,279
так что мы будем просто использовать этот размер плитки

345
00:14:34,560 --> 00:14:45,360
Это называется ImageObserver, и вы можете просто ввести здесь null

348
00:14:41,760 --> 00:14:51,120
Итак, мы собираемся нарисовать изображение по x и y с таким размером

350
00:14:48,160 --> 00:14:51,120
так что давайте проверим это

354
00:14:56,880 --> 00:15:01,839
так появился синий мальчик

355
00:14:59,519 --> 00:15:03,519
появился персонаж игрока

356
00:15:01,839 --> 00:15:10,399
теперь вместо белого прямоугольника мы можем управлять синим мальчиком 

360
00:15:10,839 --> 00:15:21,920
но не похоже, что он ходит.

363
00:15:18,079 --> 00:15:24,320
он больше скользит или что-то вроде того.

364
00:15:21,920 --> 00:15:32,959
это потому, что мы использовали только up1, down1, left1, right1

366
00:15:28,079 --> 00:15:40,800
мы не использовали эти up2, down2, left2, right2

370
00:15:38,079 --> 00:15:48,800
поэтому далее мы будем использовать изображения с номерами 2 и создадим рабочую анимацию

374
00:15:48,800 --> 00:15:56,560
давайте снова обратимся к классу Entity

379
00:15:59,920 --> 00:16:05,920
и начнем с нуля

386
00:16:13,199 --> 00:16:16,639
вернуться к этому классу Player

387
00:16:17,040 --> 00:16:25,040
внутри этого метода draw мы добавим небольшой оператор if

406
00:16:58,160 --> 00:17:02,720
Думаю, я просто скопирую

421
00:17:52,400 --> 00:18:00,720
и теперь мы создадим простой переключатель спрайтов или что-то вроде того.

424
00:17:59,600 --> 00:18:10,480
поэтому внутри этого обновления сначала мы добавим счетчик спрайтов

454
00:18:59,120 --> 00:19:06,799
и после этого мы сбросим этот счетчик спрайтов

457
00:19:08,400 --> 00:19:12,720
позвольте мне объяснить немного 

458
00:19:11,280 --> 00:19:20,640
этот метод обновления вызывается 60 раз в секунду

462
00:19:20,640 --> 00:19:24,240
здесь

463
00:19:21,840 --> 00:19:33,440
потому что это находится внутри игрового цикла, который вызывается 60 раз в секунду

466
00:19:29,840 --> 00:19:39,840
так что в каждом кадре это вызывается и увеличивает этот счетчик на 1

469
00:19:38,960 --> 00:19:43,679
и если он достигнет 10

471
00:19:41,840 --> 00:19:46,640
это изменит спрайт

472
00:19:43,679 --> 00:19:48,960
1 на 2 или 2 на 1

473
00:19:46,640 --> 00:19:55,520
это означает, что изображение игрока меняется каждые 10 кадров

475
00:19:53,360 --> 00:20:02,679
и нарисует на экране изображение1 или изображение2.

477
00:19:57,600 --> 00:20:02,679
так что давайте проверим это

478
00:20:02,960 --> 00:20:05,960
хмм

479
00:20:10,080 --> 00:20:19,480
Ладно, возможно, 10 - это слишком быстро, поэтому изменим это на 12

482
00:20:26,000 --> 00:20:28,880
Хорошо, я думаю.

483
00:20:29,600 --> 00:20:35,120
но здесь все еще есть небольшой вопрос

484
00:20:32,320 --> 00:20:39,760
как вы можете видеть, персонаж игрока движется, когда вы не нажимаете никаких клавиш

488
00:20:39,760 --> 00:20:47,280
если вас это устраивает, то хорошо

489
00:20:42,720 --> 00:20:50,559
на самом деле некоторые ретро игры такие

490
00:20:47,280 --> 00:20:55,520
но если вам это не нравится, мы можем это исправить.

492
00:20:52,320 --> 00:21:00,960
сейчас счетчик спрайтов увеличивается каждый раз, когда вызывается это обновление

494
00:20:57,520 --> 00:21:05,280
но мы собираемся добавить этот оператор if

509
00:21:48,000 --> 00:21:59,159
и переместим все внутрь этого оператора if

511
00:22:01,440 --> 00:22:13,840
теперь счетчик спрайтов увеличивается только тогда, когда вы нажимаете одну из этих клавиш

515
00:22:10,640 --> 00:22:19,679
так что спрайт игрока не меняется, пока вы не нажмете клавишу

517
00:22:16,559 --> 00:22:19,679
да, давайте проверим это

518
00:22:19,840 --> 00:22:24,000
да, сейчас он не двигается 

519
00:22:22,799 --> 00:22:29,679
но если вы нажмете клавишу

521
00:22:26,559 --> 00:22:29,679
он двигается вот так

522
00:22:39,760 --> 00:22:45,919
Итак, теперь наш персонаж игрока движется

524
00:22:43,280 --> 00:22:49,280
Далее, я думаю, мы реализуем фоновые плитки

526
00:22:47,919 --> 00:22:54,200
так что больше не будет этого черного фона

528
00:22:52,559 --> 00:23:06,060
давайте сделаем это

529
00:22:54,200 --> 00:23:06,060
[Музыка]

